function removeURLParameter(t,e){var o=RegExp("([&\\?])"+e+"=[^&]*(&|$)","i");return t.replace(o,"$1").replace(/&$/,"")}function getUrlParameter(t){var e,o,a=window.location.search.substring(1).split("&");for(o=0;o<a.length;o++)if((e=a[o].split("="))[0]===t)return void 0===e[1]||decodeURIComponent(e[1]);return!1}function changeActiveSubtab(){$kw(".kw-subpage-container").addClass("hidden"),$kw("#"+getUrlParameter("subpage")+"-container").removeClass("hidden")}function kwsso_contactus_goback(){$kw(".kwsso_contactus_popup_container").hide(),$kw(".kwsso_contactus_container").hide()}function kwsso_check_if_query_valid(t){/^[a-zA-Z?,.\(\)\/@ 0-9]*$kw/.test(t.value)||(t.value=t.value.replace(/[^a-zA-Z?,.\(\)\/@ 0-9]/,""))}function toggleSupportForm(t){var e=$kw("#support_form").prev(".kwsso_box-modal-backdrop");"toggle"!==t&&e.is(":hidden")||$kw("#support_form").slideToggle(400,function(){e.is(":hidden")?e.show():e.hide()})}function contactUsOnClick(t){void 0!==t&&t.length>0&&(document.getElementById("contactQuery").value=t),$kw("#contact-us-toggle").prop("checked",!0),$kw(".kwsso_contactus_popup_container").show(),$kw(".kwsso_contactus_container").slideDown(300)}function kwsso_upgrade_to_premium(){url="https://keywoot.com",window.open(url,"_blank").focus()}function kwCopyToClipboard(t,e,o){navigator.clipboard.writeText(jQuery(e).text()),jQuery(".tooltiptext").text("Copied"),jQuery(t).mouseout(function(){setTimeout(()=>jQuery(".tooltiptext").text("Copy to Cipboard"),100)})}function kwToggleIDPAttrTable(){jQuery("div[name='idp_attributes_table']").slideToggle(300)}function downloadXMLMetadata(){let t=document.getElementById("kwsso-xml-content").textContent;if(!t){alert("No XML content found to download!");return}let e=new Blob([t],{type:"application/xml"}),o=URL.createObjectURL(e),a=document.createElement("a");a.href=o,a.download="kwsso-sp-metadata.xml",a.click(),URL.revokeObjectURL(o)}function kwBeginTestConnection(){window.open(kwssoData.testConnUrl,"KWSSO SAML SSO TEST","scrollbars=1 width=900 height=700")}function kwCopyXMLMetadataUrl(){let t=document.getElementById("kwsso-xml-metadata-url");jQuery("#showcopied").show(300),navigator.clipboard.writeText(t.value),setTimeout(()=>jQuery("#showcopied").hide(300),1e3)}jQuery(document).ready(function(){($kw=jQuery)('[name="button-loader"]').hide(),$kw(".kw-main-button.primary").on("click",function(){var t=$kw(this).find('svg[name="button-loader"]');t.show(),setTimeout(function(){t.hide()},3e3)}),$kw("#add-new-idp-button").on("click",function(){$kw("#kwsso_idp_selection_form").show(),$kw("#configured-idp-container").hide()}),$kw("#kw-edit-configuration-button").on("click",function(){let t=new URL(window.location);t.searchParams.set("ConfIdpPage",""),window.history.pushState({},"",t),$kw("#idpform").show(),$kw("#configured-idp-container").hide(),$kw("#kwsso_idp_selection_form").hide()}),$kw("#go_back_to_configured_idp_button").on("click",function(){var t=removeURLParameter(window.location.href,"ConfIdpPage");history.replaceState({},"",t),$kw("#idpform").hide(),$kw("#kwsso_idp_selection_form").hide(),$kw("#configured-idp-container").show()}),$kw("#kw-remove-idp-configuration").on("click",function(){$kw("#kwdeleteIDPModal").show()}),$kw('button[name="hide_remove_idp_conf_alert"]').on("click",function(){$kw("#kwdeleteIDPModal").hide()})}),jQuery(document).ready(function(){($kw=jQuery)("#kwsso_close_notice_button").click(function(){var t=jQuery("#kwsso_notice_modal").attr("name"),e=jQuery("#_wpnonce").attr("value");$kw("#kwsso_notice_modal").hide(),$kw.ajax({url:"admin-ajax.php",type:"POST",data:{action:"kwsso_modal_action",security:e,shown_remaining:t},crossDomain:!0,dataType:"json",success:function(t){},error:function(t,e,o){}})}),$kw("#kwsso_idp_list_search_box").on("keyup",function(){var t=$kw(this).val();$kw(".kwsss-idp-search-dropdown-container-content .kwsso_idp_seach_box").each(function(e){($row=$kw(this)).find(".kwsso_search").data("value").toLowerCase().indexOf(t.toLowerCase())>=0?($row.show(),console.log("indie show")):($row.hide(),$kw("#custom-idp").show(),$row.find(".kwsso_search").data("value").indexOf("Can't")>=0&&$row.show())})}),$kw(".kwsso_box-modal-backdrop").click(function(t){kwsso_feedback_goback(),toggleSupportForm("hide")}),jQuery(document.body).on("click","#kw-dismiss-main-admin-notice",function(t){$kw.ajax({url:"admin-ajax.php",type:"POST",data:{action:"kwsso_dismiss_notice"},crossDomain:!0,dataType:"json",success:function(){return $kw("#kw-admin-notice-container").hide(),!0},error:function(){return!1}})}),$kw(".kw-subtab-item").click(function(t){if(document.querySelectorAll(".kw-subtab-item").forEach(t=>{$kw(t).removeClass("kw-subtab-item-active")}),document.querySelectorAll(".kw-subtab-title").forEach(t=>{$kw(t).removeClass("kw-subtab-title-active")}),"SPAN"==t.target.nodeName){$kw(t.target).parent().addClass("kw-subtab-item-active"),$kw(t.target).addClass("kw-subtab-title-active");var e=$kw(t.target).attr("id")}else if("DIV"==t.target.nodeName){$kw(t.target).addClass("kw-subtab-item-active"),$kw(t.target).find("span.kw-subtab-title").addClass("kw-subtab-title-active");var e=$kw(t.target).children().attr("id")}let o=new URL(window.location);o.searchParams.set("subpage",e),window.history.pushState({},"",o),changeActiveSubtab()}),setTimeout(function(){$kw("#status_result_notice").hide(800)},6e3),$kw(".kwsso_idp_seach_box").on("click",function(){let t=$kw(this).attr("id"),e=new URL(window.location);e.searchParams.set("ConfIdpPage",t),window.history.pushState({},"",e),$kw("#kwsso_idp_selection_form").css("display","none"),$kw("#idpform").css("display","block");var o=$kw(this).attr("name"),a=$kw(this).find("[data-value]").attr("data-value");$kw("input[name='kwsso_saml_idp_name']").val(o),$kw("input[name='kwsso_saml_idp_key']").val(a)}),$kw("#go_back_to_idp_list").on("click",function(){$kw("#kwsso_idp_selection_form").css("display",""),$kw("#idpform").css("display","none");var t=removeURLParameter(window.location.href,"ConfIdpPage");history.replaceState({},"",t)}),$kw("#configureitmanualy").on("click",function(){$kw(".toggleformdiv").slideToggle(500)});var t=getUrlParameter("subpage");if(t){var e=t;$kw("#"+e).parent().addClass("kw-subtab-item-active"),$kw("#"+e).addClass("kw-subtab-title-active")}else $kw($kw(".kw-subtab-item")[0]).addClass("kw-subtab-item-active"),$kw($kw(".kw-subtab-title")[0]).addClass("kw-subtab-title-active");$kw("#upload_idp_metadata").on("click",function(){$kw("#upload_idp_metadata_actual").click()}),$kw("#upload_idp_metadata_actual").change(function(t){var e=t.target.files[0].name;$kw("#choosen_file_id").html(e)})}),jQuery(document).ready(function(t){$kw('tr[data-slug="saml-sso-wp-single-sign-on"] .deactivate a').on("click",function(t){t.preventDefault(),$kw("#kwsso-feedback-deactivation-modal").show(),setTimeout(function(){$kw(".kwsso-feedback-progress").css("width","100%")},300)}),$kw("#kwsso-feedback-skip-feedback").on("click",function(t){t.preventDefault(),window.location.href=$kw('tr[data-slug="saml-sso-wp-single-sign-on"] .deactivate a').attr("href")}),$kw("#kwsso-feedback-close-modal").on("click",function(){$kw("#kwsso-feedback-deactivation-modal").hide()})}),jQuery(document).ready(function(){jQuery("#kwsso_add_custom_attr_row").on("click",function(){let t=jQuery("#kwsso-custom-attr-row-container .custom-attr-row:first").clone();t.find("input").val(""),t.find("select").prop("selectedIndex",0),jQuery("#kwsso-custom-attr-row-container").append(t)}),jQuery("#kwsso-custom-attr-row-container").on("click",".kwsso-custom-attr-remove-button",function(){jQuery("#kwsso-custom-attr-row-container .custom-attr-row").length>1?jQuery(this).closest(".custom-attr-row").remove():alert("At least one row must remain.")})});