!function(blocks,editor,element){function tableFontCss(t){var e=t.attributes.fontFamily,a="";return"inherit"!==e&&"sans-serif"!==e&&(a+="@import url('https://fonts.googleapis.com/css?family="+e+"&display=swap');"),a+="sans-serif"===e?"div.ept4-table-"+t.attributes.tableID+" p, div.ept4-table-"+t.attributes.tableID+" a, div.ept4-table-"+t.attributes.tableID+" li { font-family: sans-serif !important};":"div.ept4-table-"+t.attributes.tableID+" p, div.ept4-table-"+t.attributes.tableID+" a, div.ept4-table-"+t.attributes.tableID+" li { font-family: '"+e+"' !important};",el("style",{},a)}function defaultTemplate(props){var templateID=props.attributes.templateID;return 0==templateID?[]:-1===templateID?[]:eval("fcaEpt4template"+templateID)}function defaultBlockProps(props){var templateID=props.attributes.templateID;return 0==templateID?{}:eval("fcaEpt4defaultBlockProps"+templateID)}var blockInitComplete=!1,el=React.createElement,InnerBlocks=wp.blockEditor.InnerBlocks,useBlockProps=wp.blockEditor.useBlockProps,useInnerBlocksProps=wp.blockEditor.useInnerBlocksProps,woo_products=[],checkIcon=el("span",{className:"dashicons dashicons-yes"}),learnMoreButton=el(wp.components.Button,{variant:"primary",onClick:function(){window.open("https://fatcatapps.com/easypricingtables/","_blank")}},"Get Premium");fcaEpt4EditorData.woo_active&&jQuery.ajax({url:fcaEpt4EditorData.ajax_url,type:"POST",data:{action:"fca_ept4_get_woo_products_ajax",nonce:fcaEpt4EditorData.nonce}}).done(function(t){t&&t.success&&(woo_products=t.data)}),blocks.registerBlockCollection("easy-pricing-tables",{title:"Easy Pricing Tables - by Fatcat Apps",icon:fcaEpt4Icons.fatcatapps}),blocks.registerBlockType("easy-pricing-tables/table",{icon:fcaEpt4Icons.table2,edit:function(props){function controls(t){t.attributes.templateID;return el(wp.blockEditor.InspectorControls,{key:"ept4-table-controls"},el(wp.components.Button,{style:{margin:"16px"},icon:"table-col-after",variant:"primary",onClick:function(){var e=wp.blocks.createBlock("easy-pricing-tables/column",defaultBlockProps(t)),a=wp.data.select("core/block-editor").getSelectedBlock();wp.data.dispatch("core/block-editor").insertBlocks(e,a.innerBlocks.length,a.clientId)}},"Add Column"),fcaEpt4EditorData.woo_active?el(wp.components.Button,{style:{margin:"0 16px 16px 16px",backgroundColor:"#7f54b3"},icon:"table-col-after",variant:"primary",onClick:function(){setfcaEpt4showWooModal(!0)}},"Add WooCommerce Column"):null,el(wp.components.PanelBody,{style:{padding:"16px"},title:"Table Settings",className:"fca-ept-table-settings"},"Free"===fcaEpt4EditorData.edition?el("div",{className:"fca-ept-get-premium",style:{marginBottom:"16px"}},el("h2",{},"Upgrade to Premium and Build Better Pricing Tables. You'll Get:"),el("p",{},checkIcon,"Nine Gorgeous & Fully-Customizable Designs"),el("p",{},checkIcon,"700+ Icons to Add to Your Tables"),el("p",{},checkIcon,"Tooltips Support for More Details"),el("p",{},checkIcon,"Font Picker with 12+ fonts"),el("p",{},checkIcon,"Priority Email Support"),el("p",{},checkIcon,"Import WooCommerce Products"),el("p",{},checkIcon,"Pricing Toggles - switch between currencies or monthly/yearly pricing"),learnMoreButton):el(wp.components.SelectControl,{label:"Font",value:t.attributes.fontFamily,options:[{label:"Sans-serif",value:"sans-serif"},{label:"Inherit",value:"inherit"},{label:"Roboto",value:"Roboto"},{label:"Open Sans",value:"Open Sans"},{label:"Lato",value:"Lato"},{label:"Oswald",value:"Oswald"},{label:"Source Sans Pro",value:"Source Sans Pro"},{label:"Montserrat",value:"Montserrat"},{label:"Merriweather",value:"Merriweather"},{label:"Raleway",value:"Raleway"},{label:"PT Sans",value:"PT Sans"},{label:"Lora",value:"Lora"},{label:"Noto Sans",value:"Noto Sans"},{label:"Nunito Sans",value:"Nunito Sans"},{label:"Concert One",value:"Concert One"},{label:"Prompt",value:"Prompt"},{label:"Work Sans",value:"Work Sans"}],onChange:function(e){e&&t.setAttributes({fontFamily:e})}}),el(wp.components.ToggleControl,{className:"ept4-table-toggle",label:"Match row height",checked:t.attributes.matchRowHeight,onChange:function(){var e=!t.attributes.matchRowHeight;if(0==e){var a=".ept4-table-"+t.attributes.tableID,o=document.querySelectorAll(a);[".planText",".planSubText",".priceText",".pricePeriod",".periodText",".billingText",".comparisonSpacer"].forEach(function(t){for(var e=o[0].querySelectorAll(t),a=0;a<e.length;a++)e[a].style.minHeight=0});o[0].querySelectorAll(".featuresText li").forEach(function(t){t.style.minHeight=0})}t.setAttributes({matchRowHeight:e})}}),el(wp.components.RangeControl,{label:"Grid Gap",max:100,min:0,value:t.attributes.gridGap,onChange:function(e){t.setAttributes({gridGap:e})}})),el(wp.components.PanelBody,{title:"Custom CSS",className:"fca-ept-css-settings",initialOpen:!1},el(wp.components.TextareaControl,{value:t.attributes.customCSS,label:"Custom CSS",help:"Add CSS to fine-tune the look of your table. For example: .wp-block-easy-pricing-tables-column { font-weight:bold }",onChange:function(e){t.setAttributes({customCSS:e})}})))}function blockInit(){wp.data.select("core/edit-post").isFeatureActive("welcomeGuide")&&wp.data.dispatch("core/edit-post").toggleFeature("welcomeGuide");var t=wp.data.select("core/editor").getCurrentPost();if("wp_block"===t.type){if(!t.content.split("\x3c!--")[1].includes("wp:easy-pricing-tables/table"))return;document.body.addEventListener("click",function(t){(t.target.href||0)==fcaEptEditorData.edit_url+"?post_type=wp_block"&&(t.target.href=fcaEptEditorData.edit_url+"?post_type=easy-pricing-table&page=ept3-list")},!0);var e=wp.data.select("core/block-editor").getBlocks().filter(function(t){return"easy-pricing-tables/table"===t.name});wp.data.subscribe(function(){wp.data.select("core/block-editor").getBlocks().filter(function(t){return"easy-pricing-tables/table"===t.name}).length<e.length&&wp.data.dispatch("core/block-editor").resetBlocks(e);var t=wp.data.select("core/editor").isSavingPost(),a=wp.data.select("core/editor").isAutosavingPost();if(t&&!a){wp.data.select("core/notices").getNotices().filter(function(t,e){return"fcaEptSuccessNotice"===t.id}).length||wp.data.dispatch("core/notices").createNotice("success","Pricing Table saved successfully! Your shortcode: [easy-pricing-tables id="+wp.data.select("core/editor").getCurrentPost().id+"]",{id:"fcaEptSuccessNotice",isDismissible:!0,actions:[{onClick:function(){window.open("https://fatcatapps.com/knowledge-base/how-to-create-your-first-pricing-table/","_blank")},label:"Need help publishing your new table?"}]})}})}}function wooModal(t){return el(wp.components.Modal,{title:"Choose a product",isDismissible:!0,className:"fca-ept-modal",onRequestClose:function(){setfcaEpt4showWooModal(!1)}},el("div",{},el(wp.components.ComboboxControl,{options:woo_products,help:"Select a product and we'll add a new column with the product name, price and URL.",onChange:function(t){setfcaEpt4wooProduct(t)}}),el(wp.components.Button,{variant:"primary",onClick:function(){var e=t.attributes.templateID;if(0==e)return[];if(0==fcaEpt4wooProduct)return[];var a=defaultBlockProps(t),o=woo_products.find(function(t){return t.value==fcaEpt4wooProduct}),l=new Function("product","return ept4WooColumnInnerBlocks"+e+"(product)");a.innerBlocksTemplate=l(o);var c=wp.blocks.createBlock("easy-pricing-tables/column",a),n=wp.data.select("core/block-editor").getSelectedBlock();wp.data.dispatch("core/block-editor").insertBlocks(c,n.innerBlocks.length,n.clientId),setfcaEpt4showWooModal(!1)}},"Add Product Column")))}function pickTemplate(t){var e=wp.data.select("core/block-editor").getSelectedBlock();return e&&-1===["easy-pricing-tables/table","easy-pricing-tables/toggle-table"].indexOf(e.name)?null:el(wp.components.Modal,{title:"Choose a template",isDismissible:!0,onRequestClose:function(){if(t.isSelected)wp.data.dispatch("core/block-editor").removeBlock(e.clientId);else{var a=wp.data.select("core/block-editor").getBlockParentsByBlockName(t.clientId,["easy-pricing-tables/toggle-table"]);wp.data.dispatch("core/block-editor").removeBlock(a[0])}},shouldCloseOnClickOutside:!1,className:"fca-ept-modal"},el("div",{className:"fca-ept-template-selection"},el("div",{className:"template-container"},el("div",{className:"template",onClick:function(){loadTemplate(2,t)}},fcaEpt4Icons.template2(),learnMoreButton),el("div",{className:"template",onClick:function(){loadTemplate(1,t)}},fcaEpt4Icons.template1(),learnMoreButton),el("div",{className:"Free"===fcaEpt4EditorData.edition?"template pro-only":"template",onClick:function(){"Free"===fcaEpt4EditorData.edition?window.open("https://fatcatapps.com/easypricingtables/","_blank"):loadTemplate(5,t)}},fcaEpt4Icons.template3(),learnMoreButton),el("div",{className:"Free"===fcaEpt4EditorData.edition?"template pro-only":"template",onClick:function(){"Free"===fcaEpt4EditorData.edition?window.open("https://fatcatapps.com/easypricingtables/","_blank"):loadTemplate(6,t)}},fcaEpt4Icons.template4(),learnMoreButton),el("div",{className:"Free"===fcaEpt4EditorData.edition?"template pro-only":"template",onClick:function(){"Free"===fcaEpt4EditorData.edition?window.open("https://fatcatapps.com/easypricingtables/","_blank"):loadTemplate(8,t)}},fcaEpt4Icons.template5(),learnMoreButton),el("div",{className:"Free"===fcaEpt4EditorData.edition?"template pro-only":"template",onClick:function(){"Free"===fcaEpt4EditorData.edition?window.open("https://fatcatapps.com/easypricingtables/","_blank"):loadTemplate(4,t)}},fcaEpt4Icons.template6(),learnMoreButton),el("div",{className:"Free"===fcaEpt4EditorData.edition?"template pro-only":"template",onClick:function(){"Free"===fcaEpt4EditorData.edition?window.open("https://fatcatapps.com/easypricingtables/","_blank"):loadTemplate(7,t)}},fcaEpt4Icons.template7(),learnMoreButton),el("div",{className:"Free"===fcaEpt4EditorData.edition?"template pro-only":"template",onClick:function(){"Free"===fcaEpt4EditorData.edition?window.open("https://fatcatapps.com/easypricingtables/","_blank"):loadTemplate(3,t)}},fcaEpt4Icons.template8(),learnMoreButton),el("div",{className:"Free"===fcaEpt4EditorData.edition?"template pro-only":"template",onClick:function(){"Free"===fcaEpt4EditorData.edition?window.open("https://fatcatapps.com/easypricingtables/","_blank"):loadTemplate(9,t)}},fcaEpt4Icons.template9(),learnMoreButton))))}function loadTemplate(templateNumber,props){var defaultAttributes=eval("fcaEpt4defaultAttributes"+templateNumber);props.setAttributes(defaultAttributes);var parents=wp.data.select("core/block-editor").getBlockParentsByBlockName(props.clientId,["easy-pricing-tables/toggle-table"]);if(parents.length){var parentBlock=wp.data.select("core/block-editor").getBlock(parents[0]);wp.data.dispatch("core/block-editor").updateBlockAttributes(parentBlock.innerBlocks[2].clientId,defaultAttributes),window.setTimeout(function(){var t=document.querySelectorAll(".wp-block-easy-pricing-tables-toggle");t.length>0&&t[t.length-1].click()},400)}}0==blockInitComplete&&(blockInit(),blockInitComplete=!0),React.useEffect(function(){""==props.attributes.tableID&&props.setAttributes({tableID:Math.random().toString(16).slice(2)})},[]);var useState=wp.element.useState,modalUseState=useState(!1),fcaEpt4showWooModal=modalUseState[0],setfcaEpt4showWooModal=modalUseState[1],productUseState=useState(0),fcaEpt4wooProduct=productUseState[0],setfcaEpt4wooProduct=productUseState[1],templateID=props.attributes.templateID,className="ept4-table-"+props.attributes.tableID+" layout-"+templateID;props.attributes.matchRowHeight&&(className+=" matchRowHeight");var blockProps=useBlockProps({className:className}),innerBlocksProps=useInnerBlocksProps({style:{gap:props.attributes.gridGap+"px"}},{orientation:"horizontal",renderAppender:!1,allowedBlocks:[],template:defaultTemplate(props)});if(-1!==templateID)return 0==templateID?pickTemplate(props):el("div",blockProps,controls(props),fcaEpt4showWooModal?wooModal(props):null,el("div",innerBlocksProps),el("style",{},props.attributes.customCSS),tableFontCss(props))},save:function(t){var e="ept4-table-"+t.attributes.tableID+" layout-"+t.attributes.templateID;t.attributes.matchRowHeight&&(e+=" matchRowHeight");var a=useBlockProps.save({style:{gap:t.attributes.gridGap+"px"},className:e}),o=useInnerBlocksProps.save();return el("div",a,o.children,el("style",{},t.attributes.customCSS),tableFontCss(t))}})}(window.wp.blocks,window.wp.editor,window.wp.element);